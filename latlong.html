<!DOCTYPE html>
<html>
   <head>
      <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css'>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">
      <meta charset="UTF-8">
      <style>
         #map {
         height: 400px;
         width: 100%;
         }
         body {
         font-family: Orbitron;
         }
         #header{
           text-align: center;
         }

         .btn-default{
           color: black;
         }
         .btn-default:hover{
           color: grey;
         }
         #footer{
           text-align: center;
         }
         .row{
           text-align: center;
           margin: 2%
         }
         .col{
           margin: 1%;
         }
         div{
           text-align: center;
         }
      </style>
   </head>
   <body class = "container">
     <div class="row">
       <!--<img src = "http://www.courts.gov.ps/images/earth.png"  class="col-xs" width=50px height=50px>-->

        <h1 class="col-lg">
         Global Economic Indicators Map
         </h1>
        <!-- <img src = "http://www.courts.gov.ps/images/earth.png"  class="col-xs" width=50px height=50px>-->
       </div>
       <!--<div class="row">Created by Shruti Vellanki</div>-->

      <div class="form-group row">
        <div class ="col"></div>
         <label for="sel1" class="col-lg">Sort cities by:</label>
         <select class="form-control col-md" id="sel1">
            <option>Exchange Rate (to USD)</option>
            <option>GDP Growth Rate</option>
            <option>GDP Per Capita</option>
            <option>Unemployment Rate</option>
            <option>Apartment Rents</option>
         </select>
         <div class ="col"></div>

      </div>

      <div id="map"></div>
      <div class = "row">
        <div class = "col">
         <img src = http://maps.google.com/mapfiles/ms/micons/red-dot.png>
         <div >High</div>
       </div>
       <div class = "col">
        <img src = http://maps.google.com/mapfiles/ms/micons/yellow-dot.png>
        <div>Medium</div>
      </div>
      <div class = "col">
       <img src = http://maps.google.com/mapfiles/ms/micons/green-dot.png>
       <div>Low</div>
     </div>
     <div class = 'col'>

</div>
<div class = 'col'>

</div>
<div class = 'col'>

</div>
<div class = 'col'>

</div>
<div class = 'col'>

</div>
<div class = 'col'>

</div>
     <a href="https://www.linkedin.com/in/shruti-vellanki-b20760b5/" id="social-media-button" class="btn btn-default fa fa-linkedin col"></a>
     <a href="https://github.com/ShrutiVellanki" id="social-media-button" class="btn btn-default fa fa-github col"></a>
     <a href="https://twitter.com/iknalleV" id="social-media-button" class="btn btn-default fa fa-twitter col"></a>
      </div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

      <script>
         $(document).ready(function() {
           jQuery.ajaxSetup({
               async: false
           });
             /*function getLinkList() {
                 var linkList = [];
                 $.getJSON("http://api.teleport.org/api/urban_areas/", function(json) {
                     for (var i = 0; i < json['count']; i++) {
                         linkList.push(json['_links']['ua:item'][i]['href']);
                     }
                 });
                 return linkList;
             }
             //returns either a list of city names, latitudes, or longitudes
             function getCityInfo(array, request) {
                 var cityInfoList = [];
                 for (var i = 0; i < array.length; i++) {
                     $.getJSON(array[i], function(json) {
                         if (request == 'cityName') {
                             cityInfoList.push(json['full_name']);
                         } else if (request == 'latCoord') {
                             cityInfoList.push(json['bounding_box']['latlon']['north']);
                         } else {
                             cityInfoList.push(json['bounding_box']['latlon']['east']);
                         }
                     });
                 }
                 return cityInfoList;
             }
             //returns a list of city details (eg: list of unemployment rates) depending on what the user wants to view about each city
             function getCityDetails(array, request) {
               var cityDetailsList = [];
                 var jsonObject, jsonObject2;
                 var pushObject;
                 for (var i = 0; i < array.length; i++) {
                     $.getJSON(array[i] + 'details/', function(json) {
                         if (request == 'exchangeRate') {
                             jsonObject = json['categories'][5]['data'][1]['float_value'];
                             jsonObject2 = json['categories'][5]['data'][0]['string_value'];
                             if (jsonObject == undefined || jsonObject2 == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = ((jsonObject).toFixed(2)).toString() + " " + jsonObject2;
                             }
                         } else if (request == 'gdpGrowthRate') {
                             jsonObject = json['categories'][5]['data'][2]['percent_value'];
                             if (jsonObject == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = (((jsonObject) * 100).toFixed(2)).toString() + "%";
                             }
                         } else if (request == 'gdpPerCapita') {
                             jsonObject = json['categories'][5]['data'][4]['currency_dollar_value'];
                             if (jsonObject == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = "$" + ((jsonObject).toFixed(2)).toString();
                             }
                         } else if (request == 'apartmentRentSmall') {
                             jsonObject = json['categories'][8]['data'][2]['currency_dollar_value'];
                             if (jsonObject == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = "$" + ((jsonObject).toFixed(2)).toString();
                             }
                         } else if (request == 'apartmentRentMed') {
                             jsonObject = json['categories'][8]['data'][1]['currency_dollar_value'];
                             if (jsonObject == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = "$" + ((jsonObject).toFixed(2)).toString();
                             }
                         } else if (request == 'apartmentRentLarge') {
                             jsonObject = json['categories'][8]['data'][0]['currency_dollar_value'];
                             if (jsonObject == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = "$" + ((jsonObject).toFixed(2)).toString();
                             }
                         } else {
                             jsonObject = json['categories'][9]['data'][3]['percent_value'];
                             if (jsonObject == undefined) {
                                 pushObject = 'info unavailible';
                             } else {
                                 pushObject = (((jsonObject) * 100).toFixed(2)).toString() + "%";
                             }
                         }
                         cityDetailsList.push(pushObject);
                     });
                 }
                 return cityDetailsList;
             }
             function setInfoWindow(index,map){
               var latCoordList = getCityInfo(getLinkList(), 'latCoord')
               var longCoordList = getCityInfo(getLinkList(), 'longCoord')
               var cityNamesList = getCityInfo(getLinkList(), 'cityName')
               var exchangeRateList = getCityDetails(getLinkList(), 'exchangeRate')
               var newPosition = {
                   lat: latCoordList[index],
                   lng: longCoordList[index]
               };
                       var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
                       //http://maps.google.com/mapfiles/ms/micons/yellow-dot.png
                       //http://maps.google.com/mapfiles/ms/micons/red-dot.png
                       //http://maps.google.com/mapfiles/ms/micons/green-dot.png
               var marker = new google.maps.Marker({
                   position: newPosition,
                   map: map,
                   icon: image
               });
               var infowindow = new google.maps.InfoWindow({
                 content: cityNamesList[index] + ' '+ exchangeRateList[index]
               })
               marker.addListener('click', function() {
                   infowindow.open(map, this);
               });
             }*/
             window.initMap = function () {
                   var uluru = {
                       lat: 0,
                       lng: 0
                   };
                   var map = new google.maps.Map(document.getElementById('map'), {
                       zoom: 2,
                       center: uluru
                   });
               for (var j=0; j<5; j++){
                 setInfoWindow(j,map);
               }
               }
               initMap();
                 /*console.log(getCityInfo(getLinkList(), 'cityName'));
                 console.log(getCityInfo(getLinkList(), 'latCoord'));
                 console.log(getCityInfo(getLinkList(), 'longCoord'));
                 console.log(getCityDetails(getLinkList(), 'exchangeRate'));
                 console.log(getCityDetails(getLinkList(), 'gdpGrowthRate'));
                 console.log(getCityDetails(getLinkList(), 'gdpGrowthRate'));
                 console.log(getCityDetails(getLinkList(), 'gdpPerCapita'));
                 console.log(getCityDetails(getLinkList(), 'apartmentRentSmall'));
                 console.log(getCityDetails(getLinkList(), 'apartmentRentMed'));
                 console.log(getCityDetails(getLinkList(), 'apartmentRentLarge'));
                 console.log(getCityDetails(getLinkList(), 'unemployment'));*/
         });
      </script>
      <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3mKlzdgbZFNvxCvcjO4nilUkpAtvIxfM"></script>
   </body>
   <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
   </body>
</html>
